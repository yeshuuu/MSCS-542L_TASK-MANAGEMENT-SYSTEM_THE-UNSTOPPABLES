-- MySQL Script generated by MySQL Workbench
-- Wed Oct 26 15:43:10 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
-- -----------------------------------------------------
-- Schema task_management
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema task_management
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `task_management` DEFAULT CHARACTER SET utf8mb4 ;
USE `task_management` ;

-- -----------------------------------------------------
-- Table `task_management`.`admin`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`admin` (
  `aid` INT(10) NOT NULL,
  `aname` VARCHAR(55) NOT NULL,
  `contact` VARCHAR(55) NOT NULL,
  `address` VARCHAR(100) NULL DEFAULT NULL,
  `username` VARCHAR(26) NOT NULL,
  `password` VARCHAR(30) NOT NULL,
  PRIMARY KEY (`aid`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`clients`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`clients` (
  `cid` INT(10) NOT NULL,
  `cname` VARCHAR(50) NOT NULL,
  `email` VARCHAR(50) NOT NULL,
  `username` VARCHAR(20) NOT NULL,
  `password` VARCHAR(20) NOT NULL,
  `company` VARCHAR(25) NOT NULL,
  `contact` BIGINT(20) NOT NULL,
  PRIMARY KEY (`cid`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task_manager` (
  `manager_id` INT(20) NOT NULL,
  `manager_name` VARCHAR(50) NOT NULL,
  `specification` VARCHAR(20) NOT NULL,
  `experience` VARCHAR(20) NOT NULL,
  `date of joining` DATE NOT NULL,
  `username` VARCHAR(20) NOT NULL,
  `password` VARCHAR(20) NOT NULL,
  PRIMARY KEY (`manager_id`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`taskemployee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`taskemployee` (
  `eid` INT(10) NOT NULL,
  `ename` VARCHAR(50) NOT NULL,
  `email` VARCHAR(55) NOT NULL,
  `username` VARCHAR(25) NOT NULL,
  `password` VARCHAR(25) NOT NULL,
  `contact` VARCHAR(25) NOT NULL,
  PRIMARY KEY (`eid`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task_category` (
  `task_cat_id` INT(10) NOT NULL,
  `category_name` VARCHAR(50) NOT NULL,
  `aid` INT(10) NOT NULL,
  `manager_id` INT(10) NOT NULL,
  `tid` INT(10) NOT NULL,
  PRIMARY KEY (`task_cat_id`),
  INDEX `task_fk1_idx` (`manager_id` ASC) VISIBLE,
  INDEX `task_fk2_idx` (`tid` ASC) VISIBLE,
  INDEX `task_fk3_idx` (`aid` ASC) VISIBLE,
  CONSTRAINT `task_fk1`
    FOREIGN KEY (`manager_id`)
    REFERENCES `task_management`.`task_manager` (`manager_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `task_fk2`
    FOREIGN KEY (`tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `task_fk3`
    FOREIGN KEY (`aid`)
    REFERENCES `task_management`.`admin` (`aid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task_date`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task_date` (
  `date_id` INT(10) NOT NULL,
  `tid` INT(10) NOT NULL,
  `cid` INT(10) NOT NULL,
  `manager_id` INT(10) NOT NULL,
  `date` DATE NOT NULL,
  `eid` INT(10) NOT NULL,
  `task_cat_id` INT(10) NOT NULL,
  PRIMARY KEY (`date_id`),
  INDEX `date_fk1_idx` (`cid` ASC) VISIBLE,
  INDEX `date_fk2_idx` (`manager_id` ASC) VISIBLE,
  INDEX `date_fk3_idx` (`eid` ASC) VISIBLE,
  INDEX `date_fk4_idx` (`task_cat_id` ASC) VISIBLE,
  INDEX `date_fk5_idx` (`tid` ASC) VISIBLE,
  CONSTRAINT `date_fk1`
    FOREIGN KEY (`cid`)
    REFERENCES `task_management`.`clients` (`cid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `date_fk2`
    FOREIGN KEY (`manager_id`)
    REFERENCES `task_management`.`task_manager` (`manager_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `date_fk3`
    FOREIGN KEY (`eid`)
    REFERENCES `task_management`.`taskemployee` (`eid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `date_fk4`
    FOREIGN KEY (`task_cat_id`)
    REFERENCES `task_management`.`task_category` (`task_cat_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `date_fk5`
    FOREIGN KEY (`tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task` (
  `tid` INT(10) NOT NULL,
  `task_name` VARCHAR(50) NOT NULL,
  `dateid` INT(20) NOT NULL,
  `aid` INT(20) NOT NULL,
  `status` VARCHAR(55) NOT NULL,
  `managerid` INT(20) NOT NULL,
  `eid` INT(20) NOT NULL,
  `cid` INT(10) NOT NULL,
  PRIMARY KEY (`tid`),
  INDEX `fk1_idx` (`aid` ASC) VISIBLE,
  INDEX `fk2_idx` (`managerid` ASC) VISIBLE,
  INDEX `fk4_idx` (`cid` ASC) VISIBLE,
  INDEX `fk5_idx` (`dateid` ASC) VISIBLE,
  CONSTRAINT `fk1`
    FOREIGN KEY (`aid`)
    REFERENCES `task_management`.`admin` (`aid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk2`
    FOREIGN KEY (`managerid`)
    REFERENCES `task_management`.`task_manager` (`manager_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk4`
    FOREIGN KEY (`cid`)
    REFERENCES `task_management`.`clients` (`cid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk5`
    FOREIGN KEY (`dateid`)
    REFERENCES `task_management`.`task_date` (`date_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`notifications`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`notifications` (
  `notification_id` INT(10) NOT NULL,
  `tid` INT(10) NOT NULL,
  `notification_name` VARCHAR(50) NOT NULL,
  `aid` INT(10) NOT NULL,
  `description` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`notification_id`),
  INDEX `notification_fk1_idx` (`aid` ASC) VISIBLE,
  INDEX `notification_fk2_idx` (`tid` ASC) VISIBLE,
  CONSTRAINT `notification_fk1`
    FOREIGN KEY (`aid`)
    REFERENCES `task_management`.`admin` (`aid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `notification_fk2`
    FOREIGN KEY (`tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task_status_review`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task_status_review` (
  `task_status_id` INT(10) NOT NULL,
  `tid` INT(10) NOT NULL,
  `task_cat_id` INT(10) NOT NULL,
  `cid` INT(10) NOT NULL,
  `manager_id` INT(10) NOT NULL,
  `task_review` VARCHAR(100) NOT NULL,
  `date_id` INT(10) NOT NULL,
  PRIMARY KEY (`task_status_id`),
  INDEX `status_fk1_idx` (`cid` ASC) VISIBLE,
  INDEX `status_fk2_idx` (`manager_id` ASC) VISIBLE,
  INDEX `status_fk3_idx` (`date_id` ASC) VISIBLE,
  INDEX `status_fk4_idx` (`tid` ASC) VISIBLE,
  INDEX `status_fk5_idx` (`task_cat_id` ASC) VISIBLE,
  CONSTRAINT `status_fk1`
    FOREIGN KEY (`cid`)
    REFERENCES `task_management`.`clients` (`cid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `status_fk2`
    FOREIGN KEY (`manager_id`)
    REFERENCES `task_management`.`task_manager` (`manager_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `status_fk3`
    FOREIGN KEY (`date_id`)
    REFERENCES `task_management`.`task_date` (`date_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `status_fk4`
    FOREIGN KEY (`tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `status_fk5`
    FOREIGN KEY (`task_cat_id`)
    REFERENCES `task_management`.`task_category` (`task_cat_id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`task_update`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`task_update` (
  `task_update_id` INT(10) NOT NULL,
  `tid` INT(10) NOT NULL,
  `eid` INT(10) NOT NULL,
  `update_date` DATE NOT NULL,
  `update_details` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`task_update_id`),
  INDEX `update_fk1_idx` (`eid` ASC) VISIBLE,
  INDEX `update_fk2_idx` (`tid` ASC) VISIBLE,
  CONSTRAINT `update_fk1`
    FOREIGN KEY (`eid`)
    REFERENCES `task_management`.`taskemployee` (`eid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `update_fk2`
    FOREIGN KEY (`tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


-- -----------------------------------------------------
-- Table `task_management`.`taskemployee_has_task`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_management`.`taskemployee_has_task` (
  `taskemployee_eid` INT(10) NOT NULL,
  `task_tid` INT(10) NOT NULL,
  PRIMARY KEY (`taskemployee_eid`, `task_tid`),
  INDEX `fk_taskemployee_has_task_task1_idx` (`task_tid` ASC) VISIBLE,
  INDEX `fk_taskemployee_has_task_taskemployee1_idx` (`taskemployee_eid` ASC) VISIBLE,
  CONSTRAINT `fk_taskemployee_has_task_taskemployee1`
    FOREIGN KEY (`taskemployee_eid`)
    REFERENCES `task_management`.`taskemployee` (`eid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_taskemployee_has_task_task1`
    FOREIGN KEY (`task_tid`)
    REFERENCES `task_management`.`task` (`tid`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

INSERT INTO `taskemployee`(`eid`, `ename`, `email`, `username`, `password`, `contact`) VALUES ('1','rahul','rahul@gmail.com','rahul1','rahul',877267393),('2','ritul','ritul@gmail.com','ritul','ritul',9853783783),('3','sohan','sohan@gmail.com','sohan1','sohan',9853783273),('4','Ramesh','ramesh@gmail.com','ramesh','ramesh',9037937843),('5','Akansha','aku@gmail.com','aku1','aku1',9812345678),('6','Anmika','anamika@gmail.com','anamika','anamika',9812378933),('7','anjali','anjali@gmail.com','anu','anjali',8947940749);
INSERT INTO `task_category`(`task_cat_id`, `category_name`, `aid`, `manager_id`, `tid`) VALUES ('1','cat1','1','1','1'),('2','cat2','2','2','2'),('3','cat3','3','3','3'),('4','cat5','4','4','4'),('5','cat4','5','5','5'),('6','cat6','6','6','6'),('7','cat7','7','7','7'),('8','cat8','8','8','8'),('9','cat9','9','9','9'),('10','cat10','10','10','10');
INSERT INTO `task_date`(`date_id`, `tid`, `cid`, `manager_id`, `date`, `eid`, `task_cat_id`) VALUES ('1','1','1','1','2000-09-08','1','1'),('2','3','4','7','2000-02-02','2','6'),('3','3','4','3','2000-03-09','3','3'),('4','4','4','4','2000-03-08','4','4'),('5','5','5','5','2000-05-09','5','5'),('6','6','6','6','2000-06-09','6','6'),('7','7','7','7','2000-07-07','7','7'),('8','8','8','8','2000-08-09','8','8'),('9','9','9','9','2000-09-07','9','9'),('10','10','10','1','2000-07-08','8','8');
INSERT INTO `task`(`eid`) VALUES ('2'),('1'),('3'),('4'),('5'),('5'),('4'),('8'),('3'),('5');
INSERT INTO `task`(`tid`, `eid`) VALUES ('1','2'),('2','1'),('3','5'),('6','5'),('7','4'),('8','8'),('9','3'),('10','5');
drop table task;
INSERT INTO `task`(`tid`, `task_name`, `dateid`, `aid`, `status`, `managerid`, `eid`, `cid`) VALUES ('21','client1','1','1','pending','1','2','2'),('22','client2','2','2','running','2','1','3'),('23','client3','3','3','pending','1','3','3'),('24','client4','4','4','submitted','4','4','4'),('25','client5','5','5','pending','5','5','5'),('26','client6','6','6
','running','6','5','5'),('27','client7','7','7','pending','7','4','2'),('28','client8','8','8','pending','8','8','8'),('29','client 9','9','9','pending','9','3','2'),('30','client 10','10','10','submitted','10','5','2');

select * from admin;
select * from clients;
select * from notifications;
select * from task;
insert into task (eid) values('1');
select * from task_category;
select * from task_date;
select * from task_manager;
select * from task_status_review;
select * from admin where aid >4;
alter table admin
 add  username int;

select * from task;
update admin
set username= "admin@gmail.com "where aid=1; 
select * from task;
update notifications
set description="sap basis" where notification_id=8; 
select * from notifications;
update clients

set email="rijudas123@gmail.com"

where cid=1;
 
select * from clients;
select distinct cname, task _name, status from  clients  join  task  on task.cid = clients.cid;
select	distinct	task_name,status,managerid	from	task	join	task_category	on task.tid=task_category.tid;
select task_name, dateid,status,manager_id,date from task join task_date on task.tid=task_date.tid;










